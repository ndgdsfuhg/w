(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7813],{7235:(e,s,r)=>{"use strict";r.d(s,{d:()=>i});var a=r(95155),t=r(12115),l=r(27599),n=r(25016);let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(l.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...t,ref:s,children:(0,a.jsx)(l.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=l.bL.displayName},20120:(e,s,r)=>{"use strict";r.d(s,{$v:()=>f,EO:()=>m,Lt:()=>o,Rx:()=>g,Zr:()=>p,ck:()=>x,r7:()=>h,wd:()=>u});var a=r(95155),t=r(12115),l=r(12352),n=r(25016),i=r(97003);let o=l.bL;l.l9;let c=l.ZL,d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t,ref:s})});d.displayName=l.hJ.displayName;let m=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsx)(l.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t})]})});m.displayName=l.UC.displayName;let u=e=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...r})};u.displayName="AlertDialogHeader";let x=e=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...r})};x.displayName="AlertDialogFooter";let h=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold",r),...t})});h.displayName=l.hE.displayName;let f=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",r),...t})});f.displayName=l.VY.displayName;let g=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(l.rc,{ref:s,className:(0,n.cn)((0,i.r)(),r),...t})});g.displayName=l.rc.displayName;let p=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(l.ZD,{ref:s,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...t})});p.displayName=l.ZD.displayName},33789:(e,s,r)=>{"use strict";r.d(s,{p:()=>n});var a=r(95155),t=r(12115),l=r(25016);let n=t.forwardRef((e,s)=>{let{className:r,type:t,...n}=e;return(0,a.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...n})});n.displayName="Input"},51089:(e,s,r)=>{"use strict";r.d(s,{II:()=>h,at:()=>u});var a=r(95155),t=r(12115),l=r(26991),n=r(87647),i=r(37665),o=r(25016);let c={light:"",dark:".dark"},d=t.createContext(null);function m(){let e=t.useContext(d);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let u=t.forwardRef((e,s)=>{let{id:r,className:n,children:i,config:c,...m}=e,u=t.useId(),h="chart-".concat(r||u.replace(/:/g,""));return(0,a.jsx)(d.Provider,{value:{config:c},children:(0,a.jsxs)("div",{"data-chart":h,ref:s,className:(0,o.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...m,children:[(0,a.jsx)(x,{id:h,config:c}),(0,a.jsx)(l.u,{children:i})]})})});u.displayName="Chart";let x=e=>{let{id:s,config:r}=e,t=Object.entries(r).filter(e=>{let[,s]=e;return s.theme||s.color});return t.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(c).map(e=>{let[r,a]=e;return"\n".concat(a," [data-chart=").concat(s,"] {\n").concat(t.map(e=>{var s;let[a,t]=e,l=(null==(s=t.theme)?void 0:s[r])||t.color;return l?"  --color-".concat(a,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},h=n.m;function f(e,s,r){if("object"!=typeof s||null===s)return;let a="payload"in s&&"object"==typeof s.payload&&null!==s.payload?s.payload:void 0,t=r;return r in s&&"string"==typeof s[r]?t=s[r]:a&&r in a&&"string"==typeof a[r]&&(t=a[r]),t in e?e[t]:e[r]}t.forwardRef((e,s)=>{let{active:r,payload:l,className:n,indicator:i="dot",hideLabel:c=!1,hideIndicator:d=!1,label:u,labelFormatter:x,labelClassName:h,formatter:g,color:p,nameKey:b,labelKey:j}=e,{config:v}=m(),N=t.useMemo(()=>{var e;if(c||!(null==l?void 0:l.length))return null;let[s]=l,r="".concat(j||(null==s?void 0:s.dataKey)||(null==s?void 0:s.name)||"value"),t=f(v,s,r),n=j||"string"!=typeof u?null==t?void 0:t.label:(null==(e=v[u])?void 0:e.label)||u;return x?(0,a.jsx)("div",{className:(0,o.cn)("font-medium",h),children:x(n,l)}):n?(0,a.jsx)("div",{className:(0,o.cn)("font-medium",h),children:n}):null},[u,x,l,c,h,v,j]);if(!r||!(null==l?void 0:l.length))return null;let y=1===l.length&&"dot"!==i;return(0,a.jsxs)("div",{ref:s,className:(0,o.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[y?null:N,(0,a.jsx)("div",{className:"grid gap-1.5",children:l.map((e,s)=>{let r="".concat(b||e.name||e.dataKey||"value"),t=f(v,e,r),l=p||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,o.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:g&&(null==e?void 0:e.value)!==void 0&&e.name?g(e.value,e.name,e,s):(0,a.jsxs)(a.Fragment,{children:[(null==t?void 0:t.icon)?(0,a.jsx)(t.icon,{}):!d&&(0,a.jsx)("div",{className:(0,o.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":y&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,a.jsxs)("div",{className:(0,o.cn)("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[y?N:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==t?void 0:t.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})])]})}).displayName="ChartTooltip",i.s,t.forwardRef((e,s)=>{let{className:r,hideIcon:t=!1,payload:l,verticalAlign:n="bottom",nameKey:i}=e,{config:c}=m();return(null==l?void 0:l.length)?(0,a.jsx)("div",{ref:s,className:(0,o.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",r),children:l.map(e=>{let s="".concat(i||e.dataKey||"value"),r=f(c,e,s);return(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!t?(0,a.jsx)(r.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null}).displayName="ChartLegend"},54378:(e,s,r)=>{Promise.resolve().then(r.bind(r,73896))},67812:(e,s,r)=>{"use strict";r.d(s,{E:()=>i});var a=r(95155);r(12115);var t=r(83101),l=r(25016);let n=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:r,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:r}),s),...t})}},70743:(e,s,r)=>{"use strict";function a(e){if(!e||"string"!=typeof e)return!1;let s=e.trim();if(s.length<32||s.length>44)return!1;try{let{PublicKey:e}=r(25223);return new e(s),!0}catch(e){return/^[1-9A-HJ-NP-Za-km-z]{32,44}$/.test(s)}}r.d(s,{T:()=>a})},73896:(e,s,r)=>{"use strict";r.d(s,{default:()=>rr});var a=r(95155),t=r(12115),l=r(83209),n=r(97003),i=r(62089),o=r(67812),c=r(62020),d=r(16746),m=r(17443),u=r(59434);async function x(e){try{let s=await (0,u.N)(),r=await fetch("/api/profile/".concat(e),{method:"GET",cache:"no-store",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});return await r.json()}catch(e){return console.error("Error fetching user profile:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}function h(){let{user:e,isLoggedIn:s}=(0,d.v)(),[r,a]=(0,t.useState)(null),[l,n]=(0,t.useState)(!1),[i,o]=(0,t.useState)(null),c=(0,t.useCallback)(async()=>{if(!s||!(null==e?void 0:e.id)){a(null),o(null);return}n(!0),o(null);try{let s=await x(e.id);s.success&&s.user?a(s.user):(o(s.error||"Failed to fetch user data"),a(null))}catch(e){o(e instanceof Error?e.message:"Unknown error"),a(null)}finally{n(!1)}},[s,null==e?void 0:e.id]);return(0,t.useEffect)(()=>{s&&(null==e?void 0:e.id)?c():(a(null),o(null))},[s,null==e?void 0:e.id,c]),{userData:r,loading:l,error:i,refreshUserData:(0,t.useCallback)(async()=>{await c()},[c])}}async function f(e,s){try{let r=await (0,u.N)(),a=await fetch("/api/username",{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":e,Authorization:"Bearer ".concat(r)},body:JSON.stringify({username:s})}),t=await a.json();if(!a.ok&&(400===a.status||409===a.status))return t;if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));return t}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error",error_type:"network_error"}}}function g(e){let{user:s}=(0,d.v)(),[r,a]=(0,t.useState)(""),[l,n]=(0,t.useState)(""),[i,o]=(0,t.useState)(!1),[c,m]=(0,t.useState)(!1),[u,x]=(0,t.useState)(!1),[h,g]=(0,t.useState)(!1),[p,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(void 0!==e){let s=e||"";a(s),n(s),o(!1),m(!1)}},[e]);let j=(0,t.useCallback)(e=>{let s=e.target.value;a(s),h&&g(!1),p&&b(!1),o(s!==l),m(!1)},[l,h,p]),v=(0,t.useCallback)(async()=>{if((null==s?void 0:s.id)&&i&&r.trim()){x(!0);try{let e=await f(s.id,r.trim());if(e.success)n(r.trim()),o(!1),m(!0),g(!1),b(!1);else throw Error(e.error||"Failed to update username")}catch(e){throw e}finally{x(!1)}}},[null==s?void 0:s.id,i,r]),N=(0,t.useCallback)(()=>{g(!1),b(!1)},[]);return{playerName:r,savedUsername:l,hasUsernameChanged:i,usernameSaved:c,isSavingUsername:u,usernameValidationError:h,updateButtonValidationError:p,handleUsernameChange:j,saveUsername:v,clearValidationErrors:N,setValidationErrors:(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g(e),b(s)},[]),validateUsernameInput:(0,t.useCallback)(e=>(function(e){let s=e.trim();return s.length<1||s.length>30?{isValid:!1,error:"Username must be between 1 and 30 characters",error_type:"length_validation_error"}:/^[a-zA-Z0-9\-_.]+$/.test(s)?{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens (-), underscores (_), and periods (.)",error_type:"invalid_characters_error"}})(e),[])}}var p=r(50812),b=r(37621),j=r(25629),v=r(60516),N=r(25223),y=r(18720),w=r(35130),k=r(2068),S=r(20508),A=r(53270),C=r(89116),_=r(6613),E=r(89559),R=r(91169),P=r(85921),F=r(57828),U=r(5917),I=r(11010),T=r(39068),L=r(80003),M=r(75882),O=r(75426),z=r(53873);async function B(e){let s=await (0,u.N)();return{"Content-Type":"application/json","x-user-id":e,Authorization:"Bearer ".concat(s)}}async function D(e,s){try{let r=await fetch("/api/friends/request",{method:"POST",headers:await B(e),body:JSON.stringify({targetUserId:s})});return await r.json()}catch(e){return console.error("Error sending friend request:",e),{success:!1,message:"Failed to send friend request",error:e instanceof Error?e.message:"Unknown error"}}}async function $(e,s){try{let r=await fetch("/api/friends/accept",{method:"POST",headers:await B(e),body:JSON.stringify({requesterId:s})});return await r.json()}catch(e){return console.error("Error accepting friend request:",e),{success:!1,message:"Failed to accept friend request",error:e instanceof Error?e.message:"Unknown error"}}}async function Z(e,s){try{let r=await fetch("/api/friends/decline",{method:"POST",headers:await B(e),body:JSON.stringify({requesterId:s})});return await r.json()}catch(e){return console.error("Error declining friend request:",e),{success:!1,message:"Failed to decline friend request",error:e instanceof Error?e.message:"Unknown error"}}}async function V(e,s){try{let r=await fetch("/api/friends/block",{method:"POST",headers:await B(e),body:JSON.stringify({targetUserId:s})});return await r.json()}catch(e){return console.error("Error blocking user:",e),{success:!1,message:"Failed to block user",error:e instanceof Error?e.message:"Unknown error"}}}async function W(e,s){try{let r=await fetch("/api/friends/unblock",{method:"POST",headers:await B(e),body:JSON.stringify({targetUserId:s})});return await r.json()}catch(e){return console.error("Error unblocking user:",e),{success:!1,message:"Failed to unblock user",error:e instanceof Error?e.message:"Unknown error"}}}async function q(e,s){try{let r=await fetch("/api/friends/remove",{method:"POST",headers:await B(e),body:JSON.stringify({friendId:s})});return await r.json()}catch(e){return console.error("Error removing friend:",e),{success:!1,message:"Failed to remove friend",error:e instanceof Error?e.message:"Unknown error"}}}async function G(e){try{let s=await fetch("/api/friends/list",{method:"GET",cache:"no-store",headers:await B(e)});return await s.json()}catch(e){return console.error("Error fetching friends list:",e),{success:!1,friends:[],count:0,error:e instanceof Error?e.message:"Unknown error"}}}async function H(e){try{let s=await fetch("/api/friends/blocked",{method:"GET",cache:"no-store",headers:await B(e)});return await s.json()}catch(e){return console.error("Error fetching blocked list:",e),{success:!1,blocked:[],count:0,error:e instanceof Error?e.message:"Unknown error"}}}async function Y(e){try{let s=await fetch("/api/friends/pending",{method:"GET",cache:"no-store",headers:await B(e)});return await s.json()}catch(e){return console.error("Error fetching pending requests:",e),{success:!1,incoming:[],outgoing:[],incomingCount:0,outgoingCount:0,error:e instanceof Error?e.message:"Unknown error"}}}async function J(e,s){try{let r=await (0,u.N)(),a=await fetch("/api/friends/cancel",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":e,Authorization:"Bearer ".concat(r)},body:JSON.stringify({targetUserId:s})});return await a.json()}catch(e){return console.error("Error canceling friend request:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}var X=r(50700),K=r(15239),Q=r(46717),ee=r(65229),es=r(25016);let er=Q.bL;Q.l9;let ea=Q.ZL;Q.bm;let et=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(Q.hJ,{ref:s,className:(0,es.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t})});et.displayName=Q.hJ.displayName;let el=t.forwardRef((e,s)=>{let{className:r,children:t,...l}=e;return(0,a.jsxs)(ea,{children:[(0,a.jsx)(et,{}),(0,a.jsxs)(Q.UC,{ref:s,className:(0,es.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[t,(0,a.jsxs)(Q.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(ee.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});el.displayName=Q.UC.displayName;let en=e=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,es.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...r})};en.displayName="DialogHeader";let ei=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(Q.hE,{ref:s,className:(0,es.cn)("text-lg font-semibold leading-none tracking-tight",r),...t})});ei.displayName=Q.hE.displayName,t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(Q.VY,{ref:s,className:(0,es.cn)("text-sm text-muted-foreground",r),...t})}).displayName=Q.VY.displayName;var eo=r(87983),ec=r(83101);let ed=eo.bL,em=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(eo.B8,{ref:s,className:(0,es.cn)("inline-flex items-center justify-center gap-2 p-0 bg-transparent",r),...t})});em.displayName=eo.B8.displayName;let eu=(0,ec.F)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-bold ring-offset-background transition-all duration-100 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 select-none cursor-pointer will-change-transform px-4 py-2",{variants:{variant:{default:"bg-transparent border-2 border-gold text-gold shadow-[0_4px_0_#996B00] hover:bg-gold/10 hover:shadow-[0_2px_0_#996B00] active:shadow-[0_1px_0_#996B00] hover:translate-y-[2px] active:translate-y-[3px] data-[state=active]:bg-gold data-[state=active]:text-black data-[state=active]:shadow-[0_2px_0_#996B00] data-[state=active]:translate-y-[2px]"}},defaultVariants:{variant:"default"}}),ex=t.forwardRef((e,s)=>{let{className:r,variant:t,onMouseEnter:l,onMouseDown:n,...i}=e;return(0,a.jsx)(eo.l9,{ref:s,className:(0,es.cn)(eu({variant:t,className:r})),onMouseEnter:e=>{(0,c.Ak)("button_hover"),null==l||l(e)},onMouseDown:e=>{(0,c.Ak)("button_click"),null==n||n(e)},...i})});ex.displayName=eo.l9.displayName;let eh=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(eo.UC,{ref:s,className:(0,es.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});eh.displayName=eo.UC.displayName;var ef=r(86651);function eg(e){let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,es.cn)("animate-pulse rounded-md bg-muted",s),...r})}var ep=r(74225);let eb=t.forwardRef((e,s)=>{let{className:r,children:t,...l}=e;return(0,a.jsxs)(ep.bL,{ref:s,className:(0,es.cn)("relative overflow-hidden",r),...l,children:[(0,a.jsx)(ep.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,a.jsx)(ej,{}),(0,a.jsx)(ep.OK,{})]})});eb.displayName=ep.bL.displayName;let ej=t.forwardRef((e,s)=>{let{className:r,orientation:t="vertical",...l}=e;return(0,a.jsx)(ep.VM,{ref:s,orientation:t,className:(0,es.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...l,children:(0,a.jsx)(ep.lr,{className:"relative flex-1 rounded-full bg-[#3f3f3f] border border-[#1a1a1a] hover:bg-[#4f4f4f] transition-colors"})})});ej.displayName=ep.VM.displayName;var ev=r(65270),eN=r(24033),ey=r(12108);let ew=ev.bL;ev.YJ;let ek=ev.WT,eS=t.forwardRef((e,s)=>{let{className:r,children:t,...l}=e;return(0,a.jsxs)(ev.l9,{ref:s,className:(0,es.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[t,(0,a.jsx)(ev.In,{asChild:!0,children:(0,a.jsx)(eN.A,{className:"h-4 w-4 opacity-50"})})]})});eS.displayName=ev.l9.displayName;let eA=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(ev.PP,{ref:s,className:(0,es.cn)("flex cursor-default items-center justify-center py-1",r),...t,children:(0,a.jsx)(ey.A,{className:"h-4 w-4"})})});eA.displayName=ev.PP.displayName;let eC=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(ev.wn,{ref:s,className:(0,es.cn)("flex cursor-default items-center justify-center py-1",r),...t,children:(0,a.jsx)(eN.A,{className:"h-4 w-4"})})});eC.displayName=ev.wn.displayName;let e_=t.forwardRef((e,s)=>{let{className:r,children:t,position:l="popper",...n}=e;return(0,a.jsx)(ev.ZL,{children:(0,a.jsxs)(ev.UC,{ref:s,className:(0,es.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...n,children:[(0,a.jsx)(eA,{}),(0,a.jsx)(ev.LM,{className:(0,es.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(eC,{})]})})});e_.displayName=ev.UC.displayName,t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(ev.JU,{ref:s,className:(0,es.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...t})}).displayName=ev.JU.displayName;let eE=t.forwardRef((e,s)=>{let{className:r,children:t,...l}=e;return(0,a.jsxs)(ev.q7,{ref:s,className:(0,es.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ev.VF,{children:(0,a.jsx)(U.A,{className:"h-4 w-4"})})}),(0,a.jsx)(ev.p4,{children:t})]})});eE.displayName=ev.q7.displayName,t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(ev.wv,{ref:s,className:(0,es.cn)("-mx-1 my-1 h-px bg-muted",r),...t})}).displayName=ev.wv.displayName;var eR=r(91761),eP=r(8198),eF=r(80534),eU=r(26983);let eI=[{value:"total_money",label:"Winnings",icon:eR.A,endpoint:"/api/leaderboard/top10/total_money"},{value:"total_kills",label:"Eliminations",icon:eP.A,endpoint:"/api/leaderboard/top10/total_kills"},{value:"games_played",label:"Games",icon:eF.A,endpoint:"/api/leaderboard/top10/games_played"},{value:"win_rate",label:"Win Rate",icon:_.A,endpoint:"/api/leaderboard/top10/win_rate"},{value:"avg_survival_time",label:"Survival Time",icon:eU.A,endpoint:"/api/leaderboard/top10/avg_survival_time"}];function eT(e){let{onPlayerClick:s}=e,{solToUsd:r}=(0,m.a)(),[c,d]=(0,t.useState)("total_money"),[x,h]=(0,t.useState)([]),[f,g]=(0,t.useState)(!0),[p,b]=(0,t.useState)(null),j=async e=>{try{g(!0),b(null);let s=eI.find(s=>s.value===e);if(!s)throw Error("Unknown category: ".concat(e));let r=await (0,u.N)(),a=await fetch("".concat(s.endpoint),{headers:{Authorization:"Bearer ".concat(r)}});if(!a.ok)throw Error("Failed to fetch leaderboard");let t=await a.json();if(t.success&&t.playerIds){let s=t.playerIds.map(async(s,a)=>{try{let t=await fetch("/api/user/".concat(s),{headers:{Authorization:"Bearer ".concat(r)}});if(!t.ok)throw Error("Failed to fetch user data for ".concat(s));let l=await t.json();if(l.success&&l.userData){let r=l.userData,t=0;switch(e){case"total_money":t=r.total_money_won||0;break;case"total_kills":t=r.total_kills||0;break;case"games_played":t=r.total_games_played||0;break;case"win_rate":t=r.win_rate||0;break;case"avg_survival_time":t=r.avg_survival_time||0;break;default:t=0}return{rank:a+1,privy_id:s,username:r.username||"Unknown Player",total_money_won_sol:r.total_money_won||0,total_money_won_usd:0,category_value:t}}throw Error("Invalid user data response")}catch(e){return console.error("❌ [LEADERBOARD] Error fetching user data for ".concat(s,":"),e),{rank:a+1,privy_id:s,username:"Error Loading",total_money_won_sol:0,total_money_won_usd:0,category_value:0}}}),a=await Promise.all(s);h(a)}else throw Error("Failed to load leaderboard data")}catch(e){console.error("❌ [LEADERBOARD] Error fetching leaderboard:",e),b(e instanceof Error?e.message:"Failed to load leaderboard")}finally{g(!1)}};(0,t.useEffect)(()=>{j(c)},[c]);let v=eI.find(e=>e.value===c),N=(null==v?void 0:v.icon)||_.A;return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N,{className:"h-5 w-5 text-gold"}),(0,a.jsx)("span",{className:"font-semibold",children:"Top 10 Players"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"• 25+ games required"})]}),(0,a.jsxs)(ew,{value:c,onValueChange:d,children:[(0,a.jsx)(eS,{className:"w-48 focus:ring-0 focus:ring-offset-0",children:(0,a.jsx)(ek,{})}),(0,a.jsx)(e_,{children:eI.map(e=>{let s=e.icon;return(0,a.jsx)(eE,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s,{className:"h-4 w-4"}),e.label]})},e.value)})})]})]}),(0,a.jsx)("div",{className:"flex-1 min-h-0",children:(0,a.jsx)(eb,{className:"h-full",children:(0,a.jsx)("div",{className:"pr-4",children:f?Array.from({length:10}).map((e,s)=>(0,a.jsx)(l.Zp,{className:"bg-background/40 border-border/40",children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eg,{className:"h-6 w-6 rounded"}),(0,a.jsx)(eg,{className:"h-4 w-24"})]}),(0,a.jsx)(eg,{className:"h-4 w-16"})]})})},s)):p?(0,a.jsx)(l.Zp,{className:"bg-destructive/10 border-destructive/20",children:(0,a.jsxs)(l.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("p",{className:"text-destructive",children:p}),(0,a.jsx)(n.$,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>j(c),children:"Try Again"})]})}):0===x.length?(0,a.jsx)(l.Zp,{className:"bg-background/40 border-border/40",children:(0,a.jsxs)(l.Wu,{className:"p-8 text-center",children:[(0,a.jsx)(_.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No players found"})]})}):x.map(e=>(0,a.jsx)(i.a,{variant:1===e.rank?"gold-outline-shine":2===e.rank?"silver-outline-shine":3===e.rank?"bronze-outline-shine":"white-outline",onClick:()=>null==s?void 0:s(e.privy_id),className:"w-full h-auto p-4 justify-between mb-2 ".concat(e.rank<=3?"relative overflow-hidden":""),asChild:!0,children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 relative z-10",children:[(0,a.jsx)(o.E,{variant:"secondary",className:"w-8 h-8 rounded-full flex items-center justify-center font-bold ".concat(1===e.rank?"bg-gold/20 text-gold border-gold/30":2===e.rank?"bg-gray-300/20 text-gray-300 border-gray-300/30":3===e.rank?"bg-amber-600/20 text-amber-600 border-amber-600/30":""),children:e.rank}),(0,a.jsx)("span",{className:"font-medium",children:e.username})]}),(0,a.jsx)("div",{className:"text-right relative z-10",children:(0,a.jsx)("div",{className:"font-semibold text-gold",children:"total_money"===c?(0,a.jsxs)("span",{children:["$",(0,a.jsx)(X.Ay,{end:r(e.total_money_won_sol),duration:.8,decimals:2,separator:","})]}):"win_rate"===c?(0,a.jsxs)("span",{children:[(0,a.jsx)(X.Ay,{end:e.category_value,duration:.8,decimals:2}),"%"]}):"avg_survival_time"===c?(0,a.jsx)("span",{children:(0,a.jsx)(X.Ay,{end:e.category_value,duration:.8,decimals:0,formattingFn:e=>{let s=Math.floor(e/60),r=Math.floor(e%60);return"".concat(s,":").concat(r.toString().padStart(2,"0"))}})}):(0,a.jsx)("span",{children:(0,a.jsx)(X.Ay,{end:e.category_value,duration:.8,decimals:0,separator:","})})})})]})},e.privy_id))})})})]})}var eL=r(33789),eM=r(24573),eO=r(96583),ez=r(80501),eB=r(20120),eD=r(38392);function e$(e){let{open:s,onOpenChange:r,username:l="this user",onConfirm:i,isLoading:o=!1}=e,[c,d]=(0,t.useState)(!1),m=async()=>{d(!0);try{await i(),r(!1)}catch(e){}finally{d(!1)}};return(0,a.jsx)(eB.Lt,{open:s,onOpenChange:r,children:(0,a.jsxs)(eB.EO,{className:"bg-background border-border",children:[(0,a.jsxs)(eB.wd,{children:[(0,a.jsxs)(eB.r7,{className:"flex items-center gap-2 text-foreground",children:[(0,a.jsx)(eD.A,{className:"h-5 w-5 text-red-500"}),"Block User"]}),(0,a.jsxs)(eB.$v,{className:"text-muted-foreground",children:["Are you sure you want to block ",(0,a.jsx)("span",{className:"font-semibold text-foreground",children:l}),"?",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"This will:",(0,a.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm",children:[(0,a.jsx)("li",{children:"Prevent them from sending you friend requests"}),(0,a.jsx)("li",{children:"Remove any existing friendship"}),(0,a.jsx)("li",{children:"Hide them from your search results"}),(0,a.jsx)("li",{children:"Prevent them from contacting you"})]})]})]}),(0,a.jsxs)(eB.ck,{children:[(0,a.jsx)(eB.Zr,{disabled:c||o,children:"Cancel"}),(0,a.jsx)(eB.Rx,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"destructive",onClick:m,disabled:c||o,className:"bg-red-600 hover:bg-red-700",children:c||o?"Blocking...":"Block User"})})]})]})})}function eZ(e){let{onPlayerClick:s,searchQuery:r,setSearchQuery:n,searchResults:c,setSearchResults:x,hasSearched:h,setHasSearched:f,lastSearchedQuery:g,setLastSearchedQuery:p}=e,[b,j]=(0,t.useState)(!1),[v,N]=(0,t.useState)("username"),[w,k]=(0,t.useState)(null),[A,C]=(0,t.useState)({}),[_,E]=(0,t.useState)(!1),[R,P]=(0,t.useState)(null),{solToUsd:F}=(0,m.a)(),{user:U,requireAuth:I}=(0,d.v)();(0,t.useEffect)(()=>{let e=setTimeout(()=>{r.trim().length>=2?r.trim()!==g&&T(r.trim()):0===r.trim().length&&(x([]),f(!1),p(""))},500);return()=>clearTimeout(e)},[r]);let T=async e=>{j(!0),f(!0),p(e);try{let s=await (0,u.N)(),r=await fetch("/api/search/users?query=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(s)}});if(!r.ok)throw Error("Failed to search users");let a=await r.json();if(a.success){x(a.users||[]),N(a.searchType||"username");let e=(a.users||[]).map(e=>e.privy_id);await L(e)}else console.error("Search failed:",a.error),x([])}catch(e){console.error("Error searching users:",e),x([])}finally{j(!1)}},L=async e=>{if(U&&0!==e.length)try{let[e,s]=await Promise.all([G(U.id),Y(U.id)]),r={};e.success&&e.friends.forEach(e=>{r[e.privy_id]="friends"}),s.success&&(s.outgoing.forEach(e=>{r[e.privy_id]="pending_outgoing"}),s.incoming.forEach(e=>{r[e.privy_id]="pending_incoming"})),C(e=>({...e,...r}))}catch(e){console.error("Error checking relationship status:",e)}},M=async e=>{if(!U)return void I();k("add-".concat(e));try{let s=await D(U.id,e);s.success?"accepted"===s.status?(C(s=>({...s,[e]:"friends"})),y.oR.success("You're now friends!",{description:"Friend request was automatically accepted"})):(C(s=>({...s,[e]:"pending_outgoing"})),y.oR.success("Friend request sent!",{description:s.message||"Your request is pending approval"})):y.oR.error("Failed to send friend request",{description:s.error||"Please try again later"})}catch(e){console.error("\uD83D\uDCA5 Error sending friend request:",e),y.oR.error("Something went wrong",{description:"Please check your connection and try again"})}finally{k(null)}},O=async()=>{if(U&&R){k("block-".concat(R.id));try{let e=await V(U.id,R.id);e.success?(C(e=>({...e,[R.id]:"blocked"})),x(e=>e.filter(e=>e.privy_id!==R.id)),y.oR.success("User blocked",{description:"They won't be able to contact you"})):y.oR.error("Failed to block user",{description:e.error||"Please try again later"})}catch(e){console.error("\uD83D\uDCA5 Error blocking user:",e),y.oR.error("Something went wrong",{description:"Please check your connection and try again"})}finally{k(null)}}},z=async e=>{if(!U)return void I();k("remove-".concat(e));try{let a=await q(U.id,e);if(a.success)C(s=>{let r={...s};return delete r[e],r}),y.oR.success("Friend removed",{description:"You are no longer friends"});else{var s,r;(null==(s=a.error)?void 0:s.includes("No friendship exists"))||(null==(r=a.error)?void 0:r.includes("FRIENDSHIP_NOT_FOUND"))?(C(s=>{let r={...s};return delete r[e],r}),y.oR.info("Friend already removed",{description:"The friendship no longer exists"})):y.oR.error("Failed to remove friend",{description:a.error||"Please try again later"})}}catch(e){console.error("\uD83D\uDCA5 Error removing friend:",e),y.oR.error("Something went wrong",{description:"Please check your connection and try again"})}finally{k(null)}};return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ef.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(eL.p,{type:"text",placeholder:"Search by username or Game ID...",value:r,onChange:e=>n(e.target.value),className:"pl-10 focus:ring-0 focus:ring-offset-0 focus-visible:ring-0 focus-visible:ring-offset-0 focus:outline-none focus-visible:outline-none border-border/40 focus:border-border/60"})]})}),(0,a.jsxs)("div",{className:"flex-1 min-h-0",children:[!h&&0===r.length&&(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(ef.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Search Players"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-2",children:"Start typing to find players by username or Game ID"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,a.jsx)("p",{children:'• Username: "john", "player123"'}),(0,a.jsx)("p",{children:'• Game ID: "abc123def456..."'})]})]})}),h&&r.length>0&&(0,a.jsx)(eb,{className:"h-full",children:(0,a.jsxs)("div",{className:"space-y-2 pr-4",children:[!b&&c.length>0&&(0,a.jsxs)("div",{className:"mb-3 text-xs text-muted-foreground",children:[(0,a.jsx)(o.E,{variant:"outline",className:"text-xs",children:"privy_id"===v?"Game ID Search":"Username Search"}),(0,a.jsxs)("span",{className:"ml-2",children:[c.length," result",1!==c.length?"s":""," found"]})]}),b?Array.from({length:5}).map((e,s)=>(0,a.jsx)(l.Zp,{className:"bg-background/40 border-border/40",children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eg,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eg,{className:"h-4 w-24"}),(0,a.jsx)(eg,{className:"h-3 w-16"})]})]}),(0,a.jsxs)("div",{className:"text-right space-y-1",children:[(0,a.jsx)(eg,{className:"h-4 w-16"}),(0,a.jsx)(eg,{className:"h-3 w-12"})]})]})})},s)):c.length>0?c.map(e=>(0,a.jsx)(l.Zp,{className:"bg-background/40 border-border/40 transition-all duration-200 hover:bg-background/80 hover:border-gold/40 hover:shadow-lg hover:shadow-gold/10 cursor-pointer",onClick:()=>null==s?void 0:s(e.privy_id),children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gold/20 flex items-center justify-center",children:(0,a.jsx)(S.A,{className:"h-5 w-5 text-gold"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-semibold text-foreground",children:e.username||"Anonymous"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.total_games_played," games played"]}),"privy_id"===v&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground/80 truncate mt-1",children:["ID: ",e.privy_id.replace("did:privy:","")]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"text-right space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gold",children:(0,a.jsx)(X.Ay,{start:0,end:F(e.total_money_won),duration:1,decimals:2,prefix:"$"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(o.E,{variant:"secondary",className:"text-xs",children:[e.total_kills," kills"]}),(0,a.jsxs)(o.E,{variant:"outline",className:"text-xs",children:[e.win_rate.toFixed(1),"% WR"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(()=>{let s=A[e.privy_id],r=w==="add-".concat(e.privy_id),t=e.privy_id===(null==U?void 0:U.id);if("friends"===s){let s=w==="remove-".concat(e.privy_id);return(0,a.jsxs)(i.a,{size:"sm",variant:"red-outline",className:"h-8 px-3 text-xs",disabled:s||t,onClick:s=>{s.stopPropagation(),z(e.privy_id)},children:[(0,a.jsx)(eM.A,{className:"h-3 w-3 mr-1"}),s?"Removing...":"Remove Friend"]})}return"pending_outgoing"===s?(0,a.jsxs)(i.a,{size:"sm",variant:"gold-outline",className:"h-8 px-3 text-xs",disabled:!0,children:[(0,a.jsx)(eU.A,{className:"h-3 w-3 mr-1"}),"Request Sent"]}):(0,a.jsxs)(i.a,{size:"sm",variant:"green-outline",className:"h-8 px-3 text-xs",disabled:r||t,onClick:s=>{s.stopPropagation(),M(e.privy_id)},children:[(0,a.jsx)(eO.A,{className:"h-3 w-3 mr-1"}),r?"Sending...":"Add Friend"]})})(),(0,a.jsxs)(i.a,{size:"sm",variant:"red-outline",className:"h-8 px-3 text-xs",disabled:w==="block-".concat(e.privy_id)||e.privy_id===(null==U?void 0:U.id),onClick:s=>{s.stopPropagation(),(e=>{if(!U)return I();let s=c.find(s=>s.privy_id===e);P({id:e,username:(null==s?void 0:s.username)||"Anonymous"}),E(!0)})(e.privy_id)},children:[(0,a.jsx)(ez.A,{className:"h-3 w-3 mr-1"}),w==="block-".concat(e.privy_id)?"Blocking...":"Block"]})]})]})]})})},e.privy_id)):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(S.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,a.jsx)("h3",{className:"text-base font-semibold mb-2",children:"No players found"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"privy_id"===v?"No player found with that Game ID":"No players found with that username"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"privy_id"===v?"Make sure the Game ID is correct and the player exists":"Try a different username or search by Game ID"})]})})]})})]}),(0,a.jsx)(e$,{open:_,onOpenChange:E,username:null==R?void 0:R.username,onConfirm:O,isLoading:w==="block-".concat(null==R?void 0:R.id)})]})}function eV(e){let{onPlayerClick:s}=e,[r,n]=(0,t.useState)("friends"),[o,c]=(0,t.useState)({friends:"",blocked:"",pending:""}),[m,u]=(0,t.useState)([]),[x,h]=(0,t.useState)([]),[f,g]=(0,t.useState)([]),[p,b]=(0,t.useState)([]),[j,v]=(0,t.useState)({friends:!1,blocked:!1,pending:!1}),[N,w]=(0,t.useState)(null),{user:k,requireAuth:A}=(0,d.v)(),C=async()=>{if(k){v(e=>({...e,friends:!0}));try{let e=await G(k.id);e.success?u(e.friends):console.error("Failed to fetch friends:",e.error)}catch(e){console.error("Error fetching friends:",e)}finally{v(e=>({...e,friends:!1}))}}},_=async()=>{if(k){v(e=>({...e,blocked:!0}));try{let e=await H(k.id);e.success?h(e.blocked):console.error("Failed to fetch blocked users:",e.error)}catch(e){console.error("Error fetching blocked users:",e)}finally{v(e=>({...e,blocked:!1}))}}},E=async()=>{if(k){v(e=>({...e,pending:!0}));try{let e=await Y(k.id);e.success?(g(e.incoming),b(e.outgoing)):console.error("Failed to fetch pending requests:",e.error)}catch(e){console.error("Error fetching pending requests:",e)}finally{v(e=>({...e,pending:!1}))}}};(0,t.useEffect)(()=>{k&&("friends"===r?C():"blocked"===r?_():"pending"===r&&E())},[k,r]);let P=(e,s)=>{c(r=>({...r,[e]:s}))},F=(e,s)=>s.trim()?e.filter(e=>e.username.toLowerCase().includes(s.toLowerCase())):e,I=async e=>{if(k){w("accept-".concat(e));try{let s=await $(k.id,e);s.success?await Promise.all([E(),C()]):console.error("Failed to accept friend request:",s.error)}catch(e){console.error("Error accepting friend request:",e)}finally{w(null)}}},T=async e=>{if(k){w("decline-".concat(e));try{let s=await Z(k.id,e);s.success?await E():console.error("Failed to decline friend request:",s.error)}catch(e){console.error("Error declining friend request:",e)}finally{w(null)}}},L=async e=>{if(k){w("unblock-".concat(e));try{let s=await W(k.id,e);s.success?await _():console.error("Failed to unblock user:",s.error)}catch(e){console.error("Error unblocking user:",e)}finally{w(null)}}},M=async e=>{if(k){w("remove-".concat(e));try{let s=await q(k.id,e);s.success?await C():console.error("Failed to remove friend:",s.error)}catch(e){console.error("Error removing friend:",e)}finally{w(null)}}},O=async e=>{if(k){w("cancel-".concat(e));try{let s=await J(k.id,e);s.success?(await E(),y.oR.success("Friend request canceled",{description:"Your outgoing request has been withdrawn"})):y.oR.error("Failed to cancel friend request",{description:s.error||"Please try again later"})}catch(e){console.error("Error canceling friend request:",e),y.oR.error("Something went wrong",{description:"Please check your connection and try again"})}finally{w(null)}}},z=(e,r,t)=>(0,a.jsx)(l.Zp,{className:"bg-background/40 border-border/40 hover:bg-background/60 transition-colors ".concat("friends"===r?"cursor-pointer hover:border-gold/40 hover:shadow-lg hover:shadow-gold/10":""),onClick:"friends"===r?()=>null==s?void 0:s(e.privy_id):void 0,children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gold/20 flex items-center justify-center",children:(0,a.jsx)(S.A,{className:"h-5 w-5 text-gold"})}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"font-semibold text-foreground",children:e.username||"Anonymous"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["pending"===r&&t&&(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(i.a,{size:"sm",variant:"green-outline",className:"h-8 w-8 p-0",disabled:N==="accept-".concat(e.privy_id),onClick:s=>{s.stopPropagation(),I(e.privy_id)},children:(0,a.jsx)(U.A,{className:"h-4 w-4"})}),(0,a.jsx)(i.a,{size:"sm",variant:"red-outline",className:"h-8 w-8 p-0",disabled:N==="decline-".concat(e.privy_id),onClick:s=>{s.stopPropagation(),T(e.privy_id)},children:(0,a.jsx)(ee.A,{className:"h-4 w-4"})})]}),"pending"===r&&!t&&(0,a.jsx)(i.a,{size:"sm",variant:"red-outline",className:"h-8 w-8 p-0",disabled:N==="cancel-".concat(e.privy_id),onClick:s=>{s.stopPropagation(),O(e.privy_id)},children:(0,a.jsx)(ee.A,{className:"h-4 w-4"})}),"blocked"===r&&(0,a.jsx)(i.a,{size:"sm",variant:"blue-outline",className:"h-8 px-3 text-xs",disabled:N==="unblock-".concat(e.privy_id),onClick:s=>{s.stopPropagation(),L(e.privy_id)},children:N==="unblock-".concat(e.privy_id)?"Unblocking...":"Unblock"}),"friends"===r&&(0,a.jsx)(i.a,{size:"sm",variant:"red-outline",className:"h-8 px-3 text-xs",disabled:N==="remove-".concat(e.privy_id),onClick:s=>{s.stopPropagation(),M(e.privy_id)},children:N==="remove-".concat(e.privy_id)?"Removing...":"Remove"})]})]})},e.privy_id),B=(e,s,r,n,i,c)=>{let d=F(s,o[e]),m=j[e];return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ef.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(eL.p,{type:"text",placeholder:"Search ".concat(e,"..."),value:o[e],onChange:s=>P(e,s.target.value),className:"pl-10 focus:ring-0 focus:ring-offset-0 focus-visible:ring-0 focus-visible:ring-offset-0 focus:outline-none focus-visible:outline-none border-border/40 focus:border-border/60"})]})}),(0,a.jsx)("div",{className:"flex-1 min-h-0",children:(0,a.jsx)(eb,{className:"h-full [&>[data-radix-scroll-area-scrollbar]]:hidden",children:(0,a.jsx)("div",{className:"space-y-2 pr-4",children:m?Array.from({length:3}).map((e,s)=>(0,a.jsx)(l.Zp,{className:"bg-background/40 border-border/40",children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eg,{className:"h-10 w-10 rounded-full"}),(0,a.jsx)(eg,{className:"h-4 w-24"})]}),(0,a.jsx)(eg,{className:"h-8 w-16"})]})})},s)):d.length>0?d.map(s=>z(s,e,c)):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[t.createElement(r,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,a.jsx)("h3",{className:"text-base font-semibold mb-2",children:n}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:i})]})})})})})]})};return(0,a.jsx)("div",{className:"h-full flex flex-col",children:(0,a.jsxs)(ed,{value:r,onValueChange:n,className:"h-full flex flex-col",children:[(0,a.jsxs)(em,{className:"grid w-full grid-cols-3 flex-shrink-0",children:[(0,a.jsxs)(ex,{value:"friends",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Friends"]}),(0,a.jsxs)(ex,{value:"blocked",children:[(0,a.jsx)(ee.A,{className:"h-4 w-4 mr-2"}),"Blocked"]}),(0,a.jsxs)(ex,{value:"pending",children:[(0,a.jsx)(eU.A,{className:"h-4 w-4 mr-2"}),"Pending"]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden mt-4",children:[(0,a.jsx)(eh,{value:"friends",className:"h-full m-0",children:B("friends",m,R.A,"No friends yet","Add friends to see them here")}),(0,a.jsx)(eh,{value:"blocked",className:"h-full m-0",children:B("blocked",x,ee.A,"No blocked users","Blocked users will appear here")}),(0,a.jsx)(eh,{value:"pending",className:"h-full m-0",children:(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ef.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(eL.p,{type:"text",placeholder:"Search pending requests...",value:o.pending,onChange:e=>P("pending",e.target.value),className:"pl-10 focus:ring-0 focus:ring-offset-0 focus-visible:ring-0 focus-visible:ring-offset-0 focus:outline-none focus-visible:outline-none border-border/40 focus:border-border/60"})]})}),(0,a.jsx)("div",{className:"flex-1 min-h-0",children:(0,a.jsx)(eb,{className:"h-full [&>[data-radix-scroll-area-scrollbar]]:hidden",children:(0,a.jsx)("div",{className:"space-y-6 pr-4",children:j.pending?(0,a.jsx)("div",{className:"space-y-2",children:Array.from({length:3}).map((e,s)=>(0,a.jsx)(l.Zp,{className:"bg-background/40 border-border/40",children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eg,{className:"h-10 w-10 rounded-full"}),(0,a.jsx)(eg,{className:"h-4 w-24"})]}),(0,a.jsx)(eg,{className:"h-8 w-16"})]})})},s))}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(()=>{let e=F(f,o.pending);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:["Incoming Requests (",e.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:f.length>0?e.length>0?e.map(e=>z(e,"pending",!0)):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No incoming requests match your search"})}):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No incoming requests"})})})]})})()}),(0,a.jsx)("div",{children:(()=>{let e=F(p,o.pending);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:["Outgoing Requests (",e.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:p.length>0?e.length>0?e.map(e=>z(e,"pending",!1)):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No outgoing requests match your search"})}):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No outgoing requests"})})})]})})()}),0===f.length&&0===p.length&&(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(eU.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,a.jsx)("h3",{className:"text-base font-semibold mb-2",children:"No pending requests"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Friend requests will appear here"})]})})]})})})})]})})]})]})})}var eW=r(35626),eq=r(18085),eG=r(16485),eH=r(30814),eY=r(51089),eJ=r(73850),eX=r(68425),eK=r(47734),eQ=r(74595),e0=r(94621),e1=r(1524);async function e2(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let{limit:r=100,page:a=1,sort:t="created_at",order:l="ASC"}=s,n=new URLSearchParams({limit:r.toString(),page:a.toString(),sort:t,order:l}),i=await (0,u.N)(),o=await fetch("/api/game-history/".concat(e,"?").concat(n),{method:"GET",cache:"no-store",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});return await o.json()}catch(e){return console.error("Error fetching game history:",e),{success:!1,game_history:[],pagination:{current_page:1,total_pages:0,total_games:0,games_per_page:0,has_next_page:!1,has_prev_page:!1},error:e instanceof Error?e.message:"Unknown error"}}}function e4(e){let{userId:s,className:r}=e,[i,o]=(0,t.useState)("ytd"),[c,d]=(0,t.useState)([]),[u,x]=(0,t.useState)([]),[h,f]=(0,t.useState)(!0),[g,p]=(0,t.useState)(!1),[b,j]=(0,t.useState)(0),{solToUsd:v}=(0,m.a)(),N=(e,s)=>{let r;if(!e.length)return e;let a=new Date;switch(s){case"1week":r=new Date(a.getTime()-6048e5);break;case"1month":r=new Date(a.getTime()-2592e6);break;case"3months":r=new Date(a.getTime()-7776e6);break;default:r=new Date(a.getFullYear(),0,1)}return e.filter(e=>!e.game||new Date(e.game.created_at)>=r)},y=async()=>{if(s){f(!0),p(!1);try{let e=await e2(s,{limit:5e4,sort:"created_at",order:"ASC"});if(e.success){console.log("\uD83D\uDCCA [MONEY-GROWTH-CHART] Fetched ".concat(e.game_history.length," games for user ").concat(s));let r=(e=>{if(!e.length)return[];let s=0,r=[];return e.forEach(e=>{let a=v(s+=e.amount_won);r.push({date:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),balance:a,game:e,amountChange:v(e.amount_won),kills:e.kills,playTimeMinutes:Math.round(e.play_time_seconds/60),cashedOut:e.cashed_out})}),r})(e.game_history);x(r);let a=N(r,i);d(a);let t=e.game_history.reduce((e,s)=>e+s.amount_won,0);j(v(t)),console.log("\uD83D\uDCCA [MONEY-GROWTH-CHART] Processed ".concat(r.length," data points, filtered to ").concat(a.length," for time range: ").concat(i))}else throw Error("Failed to get game history")}catch(e){console.error("Error fetching game history:",e),p(!0),w()}finally{f(!1)}}},w=()=>{let e=[],s=0;for(let r=0;r<20;r++){let a=Math.random()>.3?.1*Math.random()+.01:-(.05*Math.random()+.005);s+=a;let t=new Date;t.setDate(t.getDate()-(19-r)),e.push({date:t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),balance:v(s),amountChange:v(a),kills:Math.floor(10*Math.random()),playTimeMinutes:Math.floor(10*Math.random())+1,cashedOut:a>0})}d(e),j(v(s))};return(0,t.useEffect)(()=>{y()},[s]),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40 ".concat(r),children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(e1.A,{className:"h-5 w-5 text-gold"}),"Earnings",(0,a.jsx)("span",{className:"text-2xl font-bold text-gold ml-2",children:(0,a.jsx)(X.Ay,{start:0,end:b,duration:1,decimals:2,prefix:"$"})})]}),(0,a.jsxs)(ew,{value:i,onValueChange:e=>{o(e),d(N(u,e))},children:[(0,a.jsx)(eS,{className:"w-32",children:(0,a.jsx)(ek,{})}),(0,a.jsxs)(e_,{children:[(0,a.jsx)(eE,{value:"1week",children:"1 Week"}),(0,a.jsx)(eE,{value:"1month",children:"1 Month"}),(0,a.jsx)(eE,{value:"3months",children:"3 Months"}),(0,a.jsx)(eE,{value:"ytd",children:"YTD"})]})]})]}),(0,a.jsx)(l.Wu,{children:h?(0,a.jsx)("div",{className:"flex items-center justify-center h-[200px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gold mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading chart data..."})]})}):g?(0,a.jsx)("div",{className:"flex items-center justify-center h-[200px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(eR.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Unable to load chart data"}),(0,a.jsx)(n.$,{variant:"outline",size:"sm",className:"mt-2",onClick:y,children:"Retry"})]})}):(0,a.jsx)(eY.at,{config:{balance:{label:"Earnings",color:"hsl(var(--chart-1))"}},className:"min-h-[200px] w-full",children:(0,a.jsxs)(eJ.Q,{data:c,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"fillEarnings",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#d4af37",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#d4af37",stopOpacity:.1})]})}),(0,a.jsx)(eX.d,{vertical:!1,strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(eK.W,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32,tick:{fill:"#9ca3af",fontSize:12}}),(0,a.jsx)(eQ.h,{tickLine:!1,axisLine:!1,tickMargin:8,tick:{fill:"#9ca3af",fontSize:12},tickFormatter:e=>"$".concat(e.toFixed(0))}),(0,a.jsx)(eY.II,{content:e=>{let{active:s,payload:r,label:t}=e;if(s&&r&&r.length){var l;let e=r[0].payload;return(0,a.jsxs)("div",{className:"bg-background/95 border border-border rounded-lg p-3 shadow-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:t}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-lg font-bold text-gold",children:["$",Number(e.balance).toFixed(2)]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Earnings"}),e.game&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-border space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Game Result:"})," ",(0,a.jsx)("span",{className:e.cashedOut?"text-green-400":"text-red-400",children:e.cashedOut?"Won":"Lost"})]}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Amount:"})," ",(0,a.jsxs)("span",{className:e.amountChange&&e.amountChange>=0?"text-green-400":"text-red-400",children:["$",null==(l=e.amountChange)?void 0:l.toFixed(2)]})]}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Kills:"})," ",e.kills]}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Play Time:"})," ",e.playTimeMinutes,"m"]})]})]})]})}return null}}),(0,a.jsx)(e0.Gk,{dataKey:"balance",type:"monotone",fill:"url(#fillEarnings)",stroke:"#d4af37",strokeWidth:2,dot:!1})]})})})]})}function e5(e){let{open:s,onOpenChange:r,username:l="this user",onConfirm:i,isLoading:o=!1}=e,[c,d]=(0,t.useState)(!1),m=async()=>{d(!0);try{await i(),r(!1)}catch(e){}finally{d(!1)}};return(0,a.jsx)(eB.Lt,{open:s,onOpenChange:r,children:(0,a.jsxs)(eB.EO,{className:"bg-background border-border",children:[(0,a.jsxs)(eB.wd,{children:[(0,a.jsxs)(eB.r7,{className:"flex items-center gap-2 text-foreground",children:[(0,a.jsx)(ez.A,{className:"h-5 w-5 text-blue-500"}),"Unblock User"]}),(0,a.jsxs)(eB.$v,{className:"text-muted-foreground",children:["Are you sure you want to unblock ",(0,a.jsx)("span",{className:"font-semibold text-foreground",children:l]),"?",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"This will:",(0,a.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm",children:[(0,a.jsx)("li",{children:"Allow them to send you friend requests again"}),(0,a.jsx)("li",{children:"Make them visible in search results"}),(0,a.jsx)("li",{children:"Allow them to contact you"}),(0,a.jsx)("li",{children:"Restore normal interactions"})]})]})]}),(0,a.jsxs)(eB.ck,{children:[(0,a.jsx)(eB.Zr,{disabled:c||o,children:"Cancel"}),(0,a.jsx)(eB.Rx,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"outline",onClick:m,disabled:c||o,className:"border-blue-500/40 hover:bg-blue-500/20 text-blue-400",children:c||o?"Unblocking...":"Unblock User"})})]})]})})}var e3=r(83026);let e6=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsxs)(e3.bL,{ref:s,className:(0,es.cn)("relative flex w-full touch-none select-none items-center",r),...t,children:[(0,a.jsx)(e3.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(e3.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(e3.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});e6.displayName=e3.bL.displayName;var e8=r(70743),e9=r(7013),e7=r(65993),se=r(42529),ss=r(93499),sr=r(35299),sa=r(52056),st=r(93341),sl=r(20063);function sn(e){let{open:s,onOpenChange:r,recipientAddress:l,recipientName:o}=e;(0,sl.useRouter)();let{user:c}=(0,u.X)(),{sendTransaction:d}=(0,u.aU)(),{balance:x,loading:h,refetch:f}=(0,p.X)(),{solToUsd:g,usdToSol:b}=(0,m.a)(),[j,v]=(0,t.useState)("usd"),[w,k]=(0,t.useState)(""),[S,A]=(0,t.useState)(""),[C,_]=(0,t.useState)(!1),[R,P]=(0,t.useState)(""),F=b(.2),U=Math.max(0,x.sol-F),I=g(U),T=b(.01);(0,t.useEffect)(()=>{s&&(k(""),A(l||""),v("usd"),_(!1),P(""))},[s,l]),(0,t.useEffect)(()=>{s&&f&&f()},[s,f]),(0,t.useEffect)(()=>{s&&f&&(()=>{let e=setTimeout(()=>{f()},3e3);return()=>clearTimeout(e)})()},[s,f]),(0,t.useEffect)(()=>{!s&&f&&f()},[s,f]);let L=()=>{let e=parseFloat(w)||0,s="usd"===j?I:U;return 0===s?0:Math.min(100,e/s*100)},z=()=>{let e=parseFloat(w)||0;return S.trim()?(0,e8.T)(S.trim())?e<=0?{isValid:!1,error:"Please enter an amount to cash out"}:e<("usd"===j?.01:T)?{isValid:!1,error:"Minimum cashout is ".concat("usd"===j?"$".concat("0.01"):"".concat(T.toFixed(6)," SOL"))}:e>("usd"===j?I:U)?{isValid:!1,error:"Maximum available is ".concat("usd"===j?"$".concat(I.toFixed(2)):"".concat(U.toFixed(6)," SOL"))}:{isValid:!0}:{isValid:!1,error:"Please enter a valid Solana wallet address"}:{isValid:!1,error:"Please enter a destination address"}},B=async()=>{var e,s,r,a,t;let l=z();if(!l.isValid)return void y.oR.error(l.error);if(!(null==c||null==(e=c.wallet)?void 0:e.address))return void y.oR.error("Wallet not connected");if(h)return void y.oR.error("Please wait for balance to load");_(!0);try{let e=parseFloat(w)||0,s="usd"===j?b(e):e;if(s>U)throw Error("Insufficient balance. Maximum available: ".concat(U.toFixed(6)," SOL"));console.log("\uD83D\uDCB8 Processing cashout..."),console.log("\uD83D\uDCE4 Amount:","".concat(s.toFixed(6)," SOL")),console.log("\uD83D\uDCCD To:",S.trim()),console.log("\uD83D\uDCCD From:",c.wallet.address);let r=new N.Connection("https://othilia-cpwttj-fast-mainnet.helius-rpc.com","finalized");try{await r.getLatestBlockhash("finalized")}catch(e){throw Error("Unable to connect to Solana network. Please try again.")}let{blockhash:a}=await r.getLatestBlockhash("finalized"),t=new N.Transaction().add(N.SystemProgram.transfer({fromPubkey:new N.PublicKey(c.wallet.address),toPubkey:new N.PublicKey(S.trim()),lamports:Math.floor(s*N.LAMPORTS_PER_SOL)}));t.feePayer=new N.PublicKey(c.wallet.address),t.recentBlockhash=a;let l=await d({transaction:t,connection:r,uiOptions:{showWalletUIs:!0,description:o?"Send ".concat("usd"===j?"$".concat(e.toFixed(2)):"".concat(e.toFixed(6)," SOL")," to ").concat(o):"Cash out ".concat("usd"===j?"$".concat(e.toFixed(2)):"".concat(e.toFixed(6)," SOL")),buttonText:o?"Confirm Send":"Confirm Cashout",transactionInfo:{title:o?"Send Money":"Cashout Transaction",action:"Transfer SOL",contractInfo:{name:"DamnBruh",url:"https://playdamnbruh.com"}}}});console.log("✅ Cashout transaction sent successfully!"),console.log("\uD83D\uDD17 Transaction signature:",l.signature),P(l.signature),y.oR.success(o?"Money sent successfully!":"Cashout successful!",{description:o?"".concat("usd"===j?"$".concat(e.toFixed(2)):"".concat(e.toFixed(6)," SOL")," sent to ").concat(o):"".concat("usd"===j?"$".concat(e.toFixed(2)):"".concat(e.toFixed(6)," SOL")," sent to your wallet"),duration:5e3}),setTimeout(()=>{f()},2e3)}catch(n){console.error("❌ Cashout failed:",n);let e="Please try again",l="Cashout failed";(null==(s=n.message)?void 0:s.includes("User rejected"))?(l="Transaction cancelled",e="You cancelled the transaction"):(null==(r=n.message)?void 0:r.includes("Insufficient balance"))?(l="Insufficient balance",e=n.message):(null==(a=n.message)?void 0:a.includes("Invalid address"))?(l="Invalid address",e="Please check the destination address"):(null==(t=n.message)?void 0:t.includes("Network"))?(l="Network error",e="Please check your connection and try again"):n.message&&(e=n.message),y.oR.error(l,{description:e,duration:5e3})}finally{_(!1)}},D=()=>{r(!1),window.location.href="/"},$=z(),Z=$.isValid&&!C&&I>0;return(0,a.jsx)(er,{open:s,onOpenChange:r,children:(0,a.jsxs)(el,{className:"lg:scale-75 bg-background/95 backdrop-blur-sm border-border/40",children:[(0,a.jsx)(en,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)(ei,{className:"flex items-center gap-2 text-gold",children:[(0,a.jsx)(e9.A,{className:"w-5 h-5"}),o?"Send Money to ".concat(o):"Cash Out"]}),(0,a.jsxs)(i.a,{variant:"white-outline-shine",size:"sm",onClick:D,className:"shrink-0",children:[(0,a.jsx)(e7.A,{className:"w-4 h-4 mr-2"}),"Home"]})]})}),R?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-3 p-4 border border-border/40 rounded-lg bg-card/50",children:[(0,a.jsx)(se.A,{className:"w-12 h-12 text-green-400 mx-auto"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-400",children:o?"Money Sent Successfully!":"Cashout Successful!"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:o?"Your funds have been sent to ".concat(o):"Your funds have been sent to the destination wallet"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 p-3 border border-border/40 rounded-lg bg-card/50",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Transaction Signature"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"flex-1 text-xs bg-muted/50 p-2 rounded font-mono break-all",children:R}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(R),y.oR.success("Transaction signature copied!")},className:"shrink-0",children:(0,a.jsx)(O.A,{className:"w-4 h-4"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>window.open("https://solscan.io/tx/".concat(R),"_blank"),className:"shrink-0",children:(0,a.jsx)(ss.A,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)(i.a,{variant:"white-outline-shine",onClick:D,className:"w-full",children:[(0,a.jsx)(e7.A,{className:"w-4 h-4 mr-2"}),"Go Home"]}),(0,a.jsx)(i.a,{variant:"gold",onClick:()=>r(!1),className:"w-full",children:"Close"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Available Balance"}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:f,disabled:h,className:"shrink-0 p-1 h-6 w-6","aria-label":"Refresh balance",title:"Refresh balance",children:h?(0,a.jsx)(sr.A,{className:"w-3 h-3 animate-spin"}):(0,a.jsx)(E.A,{className:"w-3 h-3"})}),(0,a.jsx)(i.a,{variant:"silver-outline",size:"sm",onClick:f,disabled:h,className:"shrink-0",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sr.A,{className:"w-3 h-3 mr-2 animate-spin"}),"Refreshing"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.A,{className:"w-3 h-3 mr-2"}),"Refresh Balance"]})})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-bold ".concat(I>0?"text-gold":"text-red-400"),children:["$",I.toFixed(2)]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[U.toFixed(6)," SOL"]})]})]}),I<=0?(0,a.jsx)("div",{className:"p-2 bg-red-500/10 border border-red-500/20 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-400",children:[(0,a.jsx)(sa.A,{className:"w-3 h-3"}),(0,a.jsxs)("span",{className:"text-xs",children:["Insufficient balance for cashout. Minimum $","0.20"," + $","0.01"," required."]})]})}):(0,a.jsx)("div",{className:"p-2 bg-amber-500/10 border border-amber-500/20 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-400",children:[(0,a.jsx)(sa.A,{className:"w-3 h-3"}),(0,a.jsxs)("span",{className:"text-xs",children:["$","0.20"," reserved for transaction fees"]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(eL.p,{type:"text",value:w,onChange:e=>{var s;(""===(s=e.target.value)||/^\d*\.?\d*$/.test(s))&&k(s)},placeholder:"usd"===j?"0.00":"0.000000",className:"text-lg font-semibold pr-16"}),(0,a.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground",children:j.toUpperCase()})]}),(0,a.jsx)(i.a,{variant:"blue-outline",size:"sm",onClick:()=>{let e=parseFloat(w)||0;e>0&&("usd"===j?k(b(e).toFixed(6)):k(g(e).toFixed(2))),v("usd"===j?"sol":"usd")},className:"shrink-0",children:(0,a.jsx)(st.A,{className:"w-3 h-3"})}),(0,a.jsx)(i.a,{variant:"gold-outline",size:"sm",onClick:()=>{"usd"===j?k(I.toFixed(2)):k(U.toFixed(6))},disabled:I<=0,className:"shrink-0",children:"MAX"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(e6,{value:[L()],onValueChange:e=>{let s=("usd"===j?I:U)*e[0]/100;"usd"===j?k(s.toFixed(2)):k(s.toFixed(6))},max:100,step:1,className:"w-full",disabled:I<=0}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground text-center",children:[L().toFixed(0),"% of available balance"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:o?"Sending to ".concat(o):"Destination Wallet Address"}),(0,a.jsx)(eL.p,{type:"text",value:S,onChange:e=>A(e.target.value),placeholder:o?"".concat(o,"'s wallet address"):"Enter Solana wallet address...",className:"font-mono text-sm",disabled:!!l}),S&&!(0,e8.T)(S.trim())&&(0,a.jsxs)("div",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(sa.A,{className:"w-3 h-3"}),"Invalid Solana address format"]}),o&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"This address is locked for security when sending to other players"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(i.a,{variant:"silver-outline",onClick:()=>r(!1),className:"flex-1",disabled:C,children:"Cancel"}),(0,a.jsx)(i.a,{variant:"gold",onClick:B,disabled:!Z,className:"flex-1",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sr.A,{className:"w-4 h-4 mr-2 animate-spin"}),o?"Sending...":"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e9.A,{className:"w-4 h-4 mr-2"}),o?"Send":"Cash Out"," ",w&&"".concat("usd"===j?"$":"").concat(w).concat("sol"===j?" SOL":"")]})})]}),!$.isValid&&w&&S&&(0,a.jsxs)("div",{className:"text-xs text-red-400 text-center flex items-center justify-center gap-1",children:[(0,a.jsx)(sa.A,{className:"w-3 h-3"}),$.error]})]})]})})})}function si(e){let{selectedUserId:s,onBackToOwnProfile:r}=e,[n,c]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[f,g]=(0,t.useState)(null),[p,b]=(0,t.useState)(null),[j,v]=(0,t.useState)(null),[N,w]=(0,t.useState)(!1),[k,A]=(0,t.useState)(!1),[C,E]=(0,t.useState)(!1),{user:R,requireAuth:P}=(0,d.v)(),{solToUsd:F}=(0,m.a)(),U=async e=>{if(!R||e===R.id)return void v(null);try{let[s,r,a]=await Promise.all([G(R.id),Y(R.id),H(R.id)]),t=null;if(a.success&&a.blocked.some(s=>s.privy_id===e)&&(t="blocked"),!t&&s.success&&s.friends.some(s=>s.privy_id===e)&&(t="friends"),!t&&r.success){let s=r.outgoing.some(s=>s.privy_id===e),a=r.incoming.some(s=>s.privy_id===e);s?t="pending_outgoing":a&&(t="pending_incoming")}v(t)}catch(e){console.error("Error checking relationship status:",e)}},I=async e=>{if(!R)return void P();h(!0),g(null);try{let r=e||s||R.id,a=await x(r);a.success&&a.user?(c(a.user),r!==R.id&&await U(r)):g(a.error||"Failed to load profile")}catch(e){console.error("Error fetching profile:",e),g("Failed to load profile")}finally{h(!1)}};(0,t.useEffect)(()=>{I()},[R,s]);let T=async()=>{if(R&&n){b("add-friend");try{let e=await D(R.id,n.privy_id);e.success?"accepted"===e.status?(v("friends"),y.oR.success("You're now friends!",{description:"Friend request was automatically accepted"})):(v("pending_outgoing"),y.oR.success("Friend request sent!",{description:e.message||"Your request is pending approval"})):y.oR.error("Failed to send friend request",{description:e.error||"Please try again later"})}catch(e){console.error("Error sending friend request:",e),y.oR.error("Something went wrong",{description:"Please check your connection and try again"})}finally{b(null)}}},L=async()=>{if(R&&n){b("remove-friend");try{let e=await q(R.id,n.privy_id);e.success?(v(null),y.oR.success("Friend removed",{description:"You are no longer friends"})):y.oR.error("Failed to remove friend",{description:e.error||"Please try again later"})}catch(e){console.error("Error removing friend:",e),y.oR.error("Something went wrong",{description:"Please check your connection and try again"})}finally{b(null)}}},M=()=>{R&&n&&w(!0)},O=async()=>{if(R&&n){b("block-user");try{let e=await V(R.id,n.privy_id);e.success?(v("blocked"),y.oR.success("User blocked",{description:"They won't be able to contact you"})):y.oR.error("Failed to block user",{description:e.error||"Please try again later"})}catch(e){console.error("Error blocking user:",e),y.oR.error("Something went wrong",{description:"Please check your connection and try again"})}finally{b(null)}}},z=async()=>{if(R&&n){b("unblock-user");try{let e=await W(R.id,n.privy_id);e.success?(v(null),y.oR.success("User unblocked",{description:"You can now interact with them again"})):y.oR.error("Failed to unblock user",{description:e.error||"Please try again later"})}catch(e){console.error("Error unblocking user:",e),y.oR.error("Something went wrong",{description:"Please check your connection and try again"})}finally{b(null)}}},B=()=>{R&&n&&E(!0)};return R?u?(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)(eb,{className:"h-full",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,a.jsx)(l.Zp,{className:"bg-background/40 border-border/40",children:(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eg,{className:"h-8 w-48"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(eg,{className:"h-5 w-24"}),(0,a.jsx)(eg,{className:"h-5 w-20"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(eg,{className:"h-8 w-24"}),(0,a.jsx)(eg,{className:"h-8 w-16"}),(0,a.jsx)(eg,{className:"h-8 w-24"})]})]})})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Array.from({length:2}).map((e,s)=>(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(eg,{className:"h-6 w-32"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Array.from({length:4}).map((e,s)=>(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)(eg,{className:"h-4 w-16 mx-auto"}),(0,a.jsx)(eg,{className:"h-8 w-12 mx-auto"})]},s))})})]},s))}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(eg,{className:"h-6 w-24"}),(0,a.jsx)(eg,{className:"h-8 w-20"})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(eg,{className:"h-48 w-full"})})]})]})})}):f||!n?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(S.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Profile Not Found"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:f||"Unable to load profile data"})]})}):(0,a.jsxs)("div",{className:"h-full",children:[(0,a.jsx)(eb,{className:"h-full",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[s&&n.privy_id!==(null==R?void 0:R.id)&&r&&(0,a.jsxs)("div",{className:"flex gap-2 justify-between items-center",children:[(0,a.jsxs)(i.a,{size:"sm",variant:"white-outline",onClick:r,children:[(0,a.jsx)(eW.A,{className:"h-4 w-4 mr-2"}),"Back to My Profile"]}),(0,a.jsx)("div",{className:"flex gap-2",children:"friends"===j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.a,{size:"sm",variant:"red-outline",disabled:"remove-friend"===p,onClick:L,children:[(0,a.jsx)(eM.A,{className:"h-4 w-4 mr-1"}),"remove-friend"===p?"Removing...":"Remove Friend"]}),(0,a.jsxs)(i.a,{size:"sm",variant:"green-outline",onClick:B,children:[(0,a.jsx)(eq.A,{className:"h-4 w-4 mr-1"}),"Send Money"]})]}):"pending_outgoing"===j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.a,{size:"sm",variant:"gold-outline",disabled:!0,children:[(0,a.jsx)(eU.A,{className:"h-4 w-4 mr-1"}),"Request Sent"]}),(0,a.jsxs)(i.a,{size:"sm",variant:"red-outline",disabled:"block-user"===p,onClick:M,children:[(0,a.jsx)(eD.A,{className:"h-4 w-4 mr-1"}),"block-user"===p?"Blocking...":"Block"]}),(0,a.jsxs)(i.a,{size:"sm",variant:"green-outline",onClick:B,children:[(0,a.jsx)(eq.A,{className:"h-4 w-4 mr-1"}),"Send Money"]})]}):"blocked"===j?(0,a.jsxs)(i.a,{size:"sm",variant:"blue-outline",disabled:"unblock-user"===p,onClick:()=>{R&&n&&A(!0)},children:[(0,a.jsx)(ez.A,{className:"h-4 w-4 mr-1"}),"unblock-user"===p?"Unblocking...":"Unblock"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.a,{size:"sm",variant:"gold",disabled:"add-friend"===p,onClick:T,children:[(0,a.jsx)(eO.A,{className:"h-4 w-4 mr-1"}),"add-friend"===p?"Sending...":"Add Friend"]}),(0,a.jsxs)(i.a,{size:"sm",variant:"red-outline",disabled:"block-user"===p,onClick:M,children:[(0,a.jsx)(eD.A,{className:"h-4 w-4 mr-1"}),"block-user"===p?"Blocking...":"Block"]}),(0,a.jsxs)(i.a,{size:"sm",variant:"green-outline",onClick:B,children:[(0,a.jsx)(eq.A,{className:"h-4 w-4 mr-1"}),"Send Money"]})]})])]}),(0,a.jsx)(l.Zp,{className:"bg-background/40 border-border/40",children:(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(l.ZB,{className:"text-2xl text-foreground",children:n.username||"Anonymous Player"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(0,a.jsxs)(o.E,{variant:"outline",className:"text-xs w-fit",children:[(0,a.jsx)(eG.A,{className:"h-3 w-3 mr-1"}),"Joined ",new Date(n.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),(0,a.jsxs)(o.E,{variant:"outline",className:"text-xs w-fit",children:[(0,a.jsx)(eP.A,{className:"h-3 w-3 mr-1"}),n.streak_days," day streak"]})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)(_.A,{className:"h-5 w-5 text-gold"}),"Game Performance"]})}),(0,a.jsx)(l.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Win Rate"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gold",children:(0,a.jsx)(X.Ay,{start:0,end:n.games_won/n.total_games_played*100,duration:1,decimals:1,suffix:"%"})})]}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Games Won"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-400",children:(0,a.jsx)(X.Ay,{start:0,end:n.games_won,duration:1})})]}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Games Played"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground",children:(0,a.jsx)(X.Ay,{start:0,end:n.total_games_played,duration:1})})]}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Survival"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-400",children:(e=>{let s=Math.floor(e/60),r=Math.floor(e%60);return"".concat(s,":").concat(r.toString().padStart(2,"0"))})(n.avg_survival_time)})]})]})})]}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)(eH.A,{className:"h-5 w-5 text-red-400"}),"Combat & Time"]})}),(0,a.jsx)(l.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Eliminations"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-400",children:(0,a.jsx)(X.Ay,{start:0,end:n.total_kills,duration:1})})]}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Kills Per Game"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-300",children:(0,a.jsx)(X.Ay,{start:0,end:n.total_games_played>0?n.total_kills/n.total_games_played:0,duration:1,decimals:1})})]}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Play Time"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-neutral-400",children:(e=>{let s=Math.floor(e/3600),r=Math.floor(e%3600/60);return"".concat(s,"h ").concat(r,"m")})(n.total_play_time)})]})]})})]})]}),(0,a.jsx)(e4,{userId:n.privy_id})]})}),(0,a.jsx)(e$,{open:N,onOpenChange:w,username:null==n?void 0:n.username,onConfirm:O,isLoading:"block-user"===p}),(0,a.jsx)(e5,{open:k,onOpenChange:A,username:null==n?void 0:n.username,onConfirm:z,isLoading:"unblock-user"===p}),(0,a.jsx)(sn,{open:C,onOpenChange:E,recipientAddress:null==n?void 0:n.wallet_address,recipientName:(null==n?void 0:n.username)||"Anonymous Player"})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(S.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Please Login"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Login to view your profile"})]})})}function so(e){let{open:s,onOpenChange:r,defaultTab:l="leaderboard"}=e,[n,i]=(0,t.useState)(l),[o,c]=(0,t.useState)(null);(0,t.useEffect)(()=>{s?i(l):c(null)},[s,l]);let[d,m]=(0,t.useState)(""),[u,x]=(0,t.useState)([]),[h,f]=(0,t.useState)(!1),[g,p]=(0,t.useState)(""),b=e=>{c(e),i("profile")};return(0,a.jsx)(er,{open:s,onOpenChange:r,children:(0,a.jsxs)(el,{className:"max-w-4xl w-full h-[80vh] max-h-[80vh] flex flex-col bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/95 border-border/40",children:[(0,a.jsx)(en,{className:"flex-shrink-0 pb-4",children:(0,a.jsxs)(ei,{className:"flex items-center gap-2 text-gold",children:[(0,a.jsx)(R.A,{className:"h-5 w-5"}),"Social"]})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsxs)(ed,{value:n,onValueChange:i,className:"h-full flex flex-col",children:[(0,a.jsxs)(em,{className:"grid w-full grid-cols-4 flex-shrink-0",children:[(0,a.jsxs)(ex,{value:"leaderboard",children:[(0,a.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Leaderboard"]}),(0,a.jsxs)(ex,{value:"search",children:[(0,a.jsx)(ef.A,{className:"h-4 w-4 mr-2"}),"Search"]}),(0,a.jsxs)(ex,{value:"profile",children:[(0,a.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Profile"]}),(0,a.jsxs)(ex,{value:"friends",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Friends"]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden mt-4",children:[(0,a.jsx)(eh,{value:"leaderboard",className:"h-full m-0",children:(0,a.jsx)(eT,{onPlayerClick:b})}),(0,a.jsx)(eh,{value:"search",className:"h-full m-0",children:(0,a.jsx)(eZ,{onPlayerClick:b,searchQuery:d,setSearchQuery:m,searchResults:u,setSearchResults:x,hasSearched:h,setHasSearched:f,lastSearchedQuery:g,setLastSearchedQuery:p})}),(0,a.jsx)(eh,{value:"profile",className:"h-full m-0",children:(0,a.jsx)(si,{selectedUserId:o,onBackToOwnProfile:()=>{c(null)}})}),(0,a.jsx)(eh,{value:"friends",className:"h-full m-0",children:(0,a.jsx)(eV,{onPlayerClick:b})})]})]})})]})})}var sc=r(2317),sd=r(89715),sm=r(46046),su=r(84926);function sx(){let{user:e,isLoggedIn:s,logout:r,walletAddress:n,copyWalletAddress:o}=(0,d.v)(),{userData:c}=h(),{playerName:m,savedUsername:u,hasUsernameChanged:x,usernameSaved:f,isSavingUsername:p,usernameValidationError:b,updateButtonValidationError:j,handleUsernameChange:v,saveUsername:N,clearValidationErrors:w}=g(null==c?void 0:c.username),[k,A]=(0,t.useState)(!1),C=async()=>{try{await N(),y.oR.success("Username updated successfully!")}catch(e){y.oR.error("Failed to update username",{description:e.message||"Please try again later"})}},_=async()=>{try{await o(),A(!0),setTimeout(()=>A(!1),2e3)}catch(e){}};return s?(0,a.jsx)(eb,{className:"h-full",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-lg text-foreground",children:"Username"})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Enter your username",value:m,onChange:v,className:"flex-1 px-4 py-2 bg-background/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gold/50 focus:border-gold/50 ".concat(b?"border-red-400 border-2 ring-1 ring-red-400/30":"border-border/40")}),(0,a.jsxs)(i.a,{variant:"green",onClick:C,disabled:!x||p,className:j?"border-2 border-red-400":"",children:[(0,a.jsx)(sm.A,{className:"h-4 w-4 mr-2"}),p?"Saving...":"Update"]})]}),f&&(0,a.jsx)("p",{className:"text-sm text-green-400",children:"Username updated successfully!"})]})]}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-lg text-foreground",children:"Wallet Information"})}),(0,a.jsx)(l.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-background/50 border border-border/40 rounded-lg px-3 py-2",children:[(0,a.jsx)(M.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-mono flex-1",children:n?"".concat(n.slice(0,6),"...").concat(n.slice(-6)):"No wallet connected"}),(0,a.jsx)(i.a,{variant:"white-outline",size:"sm",onClick:_,disabled:!n,className:"h-8 w-8 p-0",children:k?(0,a.jsx)(U.A,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(O.A,{className:"h-4 w-4"})})]})})]}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-lg text-foreground",children:"Account Information"})}),(0,a.jsx)(l.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eG.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Member Since"}),(0,a.jsx)("p",{className:"font-medium",children:(null==c?void 0:c.created_at)?(e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(e){return"N/A"}})(c.created_at):"N/A"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eP.A,{className:"h-5 w-5 text-orange-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Login Streak"}),(0,a.jsxs)("p",{className:"font-medium",children:[(null==c?void 0:c.streak_days)||0," days"]})]})]})]})})]}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-lg text-foreground",children:"Account Actions"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)(i.a,{variant:"red",onClick:r,className:"w-full",children:[(0,a.jsx)(su.A,{className:"h-4 w-4 mr-2"}),"Logout"]})})]})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(S.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Not Logged In"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Please log in to view your account settings"})]})})}var sh=r(7235),sf=r(56154),sg=r(39926);function sp(){let[e,s]=(0,t.useState)({master:100,soundEffects:50,music:30,enabled:!0});return(0,t.useEffect)(()=>{{let e=c.OZ.getVolumeSettings();s({master:Math.round(100*e.master),soundEffects:Math.round(100*e.soundEffects),music:Math.round(100*e.music),enabled:e.enabled})}},[]),(0,a.jsx)(eb,{className:"h-full",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,a.jsx)(l.Zp,{className:"bg-gradient-to-r from-gold/10 to-yellow-500/10 border-gold/30",children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(sc.A,{className:"h-6 w-6 text-gold"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gold",children:"Game Settings"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Audio settings are now available! Other features are still in development."})]})]})})}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.ZB,{className:"text-lg text-foreground flex items-center gap-2",children:[e.enabled?(0,a.jsx)(w.A,{className:"h-5 w-5"}):(0,a.jsx)(k.A,{className:"h-5 w-5"}),"Audio Settings"]}),(0,a.jsx)(o.E,{variant:"default",className:"text-xs bg-green-600",children:"Active"})]})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Enable Audio"}),(0,a.jsx)(sh.d,{checked:e.enabled,onCheckedChange:e=>{s(s=>({...s,enabled:e})),c.OZ.setEnabled(e)}})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Master Volume"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.master,"%"]})]}),(0,a.jsx)(e6,{value:[e.master],max:100,step:1,disabled:!e.enabled,className:"w-full",onValueChange:e=>{let r=e[0];s(e=>({...e,master:r})),c.OZ.setMasterVolume(r/100)}})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Sound Effects"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.soundEffects,"%"]})]}),(0,a.jsx)(e6,{value:[e.soundEffects],max:100,step:1,disabled:!e.enabled,className:"w-full",onValueChange:e=>{let r=e[0];s(e=>({...e,soundEffects:r})),c.OZ.setSoundEffectVolume(r/100)}}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Controls button clicks, hover sounds, and UI audio"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Music Volume"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.music,"%"]})]}),(0,a.jsx)(e6,{value:[e.music],max:100,step:1,disabled:!e.enabled,className:"w-full",onValueChange:e=>{let r=e[0];s(e=>({...e,music:r})),c.OZ.setMusicVolume(r/100)}}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Background music (when available)"})]})]})]}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40 opacity-60",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.ZB,{className:"text-lg text-foreground flex items-center gap-2",children:[(0,a.jsx)(F.A,{className:"h-5 w-5"}),"Visual Settings"]}),(0,a.jsx)(o.E,{variant:"secondary",className:"text-xs",children:"Coming Soon"})]})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Graphics Quality"}),(0,a.jsxs)(ew,{disabled:!0,children:[(0,a.jsx)(eS,{children:(0,a.jsx)(ek,{placeholder:"High"})}),(0,a.jsxs)(e_,{children:[(0,a.jsx)(eE,{value:"low",children:"Low"}),(0,a.jsx)(eE,{value:"medium",children:"Medium"}),(0,a.jsx)(eE,{value:"high",children:"High"}),(0,a.jsx)(eE,{value:"ultra",children:"Ultra"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Show FPS Counter"}),(0,a.jsx)(sh.d,{disabled:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Smooth Camera"}),(0,a.jsx)(sh.d,{disabled:!0,defaultChecked:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Screen Shake"}),(0,a.jsx)(sh.d,{disabled:!0,defaultChecked:!0})]})]})]}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40 opacity-60",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.ZB,{className:"text-lg text-foreground flex items-center gap-2",children:[(0,a.jsx)(sf.A,{className:"h-5 w-5"}),"Performance Settings"]}),(0,a.jsx)(o.E,{variant:"secondary",className:"text-xs",children:"Coming Soon"})]})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Frame Rate Limit"}),(0,a.jsxs)(ew,{disabled:!0,children:[(0,a.jsx)(eS,{children:(0,a.jsx)(ek,{placeholder:"60 FPS"})}),(0,a.jsxs)(e_,{children:[(0,a.jsx)(eE,{value:"30",children:"30 FPS"}),(0,a.jsx)(eE,{value:"60",children:"60 FPS"}),(0,a.jsx)(eE,{value:"120",children:"120 FPS"}),(0,a.jsx)(eE,{value:"unlimited",children:"Unlimited"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"V-Sync"}),(0,a.jsx)(sh.d,{disabled:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Reduce Motion"}),(0,a.jsx)(sh.d,{disabled:!0})]})]})]}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40 opacity-60",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.ZB,{className:"text-lg text-foreground flex items-center gap-2",children:[(0,a.jsx)(sg.A,{className:"h-5 w-5"}),"Gameplay Settings"]}),(0,a.jsx)(o.E,{variant:"secondary",className:"text-xs",children:"Coming Soon"})]})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Mouse Sensitivity"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"50%"})]}),(0,a.jsx)(e6,{value:[50],max:100,step:1,disabled:!0,className:"w-full"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Auto-Zoom"}),(0,a.jsx)(sh.d,{disabled:!0,defaultChecked:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Show Grid"}),(0,a.jsx)(sh.d,{disabled:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Show Player Names"}),(0,a.jsx)(sh.d,{disabled:!0,defaultChecked:!0})]})]})]})]})})}var sb=r(23664),sj=r(5937);function sv(){let[e,s]=(0,t.useState)(!1),r=async()=>{try{await navigator.clipboard.writeText("playdamnbruh@gmail.com"),s(!0),y.oR.success("Email address copied to clipboard!",{description:"playdamnbruh@gmail.com",duration:2e3}),setTimeout(()=>s(!1),2e3)}catch(e){console.error("Failed to copy email:",e),y.oR.error("Failed to copy email address")}};return(0,a.jsx)(eb,{className:"h-full",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"text-lg text-foreground flex items-center gap-2",children:[(0,a.jsx)(sd.A,{className:"h-5 w-5"}),"Legal Documents"]})}),(0,a.jsx)(l.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(i.a,{variant:"white-outline",className:"w-full justify-between",onClick:()=>window.open("/docs/Privacy Policy, damnbruh.pdf","_blank"),children:[(0,a.jsx)("span",{children:"Privacy Policy"}),(0,a.jsx)(ss.A,{className:"h-4 w-4"})]}),(0,a.jsxs)(i.a,{variant:"white-outline",className:"w-full justify-between",onClick:()=>window.open("/docs/Terms and Conditions, damnbruh.pdf","_blank"),children:[(0,a.jsx)("span",{children:"Terms & Conditions"}),(0,a.jsx)(ss.A,{className:"h-4 w-4"})]})]})})]}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"text-lg text-foreground flex items-center gap-2",children:[(0,a.jsx)(sb.A,{className:"h-5 w-5"}),"Contact Information"]})}),(0,a.jsx)(l.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Email Support"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-background/50 border border-border/40 rounded-lg px-3 py-2 mt-1",children:[(0,a.jsx)(sb.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm flex-1 font-mono",children:"playdamnbruh@gmail.com"}),(0,a.jsx)(i.a,{variant:"white-outline",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:e?(0,a.jsx)(U.A,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(O.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Community"}),(0,a.jsxs)(i.a,{variant:"blue",className:"w-full justify-between mt-1",onClick:()=>{window.open("https://discord.gg/damnbruh","_blank")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(sj.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Join our Discord"})]}),(0,a.jsx)(ss.A,{className:"h-4 w-4"})]})]})]})})]}),(0,a.jsxs)(l.Zp,{className:"bg-background/40 border-border/40",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-lg text-foreground",children:"Additional Information"})}),(0,a.jsx)(l.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"text-sm text-muted-foreground space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Game Support:"})," For technical issues, gameplay questions, or account problems, please contact us via email or Discord."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Business Inquiries:"})," For partnerships, sponsorships, or other business-related matters, please use the email contact above."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Community Guidelines:"})," Please review our Terms & Conditions and follow our community guidelines when participating in the game and Discord server."]})]})})]})]})})}function sN(e){let{open:s,onOpenChange:r,defaultTab:l="account"}=e,[n,i]=(0,t.useState)(l);return(0,t.useEffect)(()=>{s&&i(l)},[s,l]),(0,a.jsx)(er,{open:s,onOpenChange:r,children:(0,a.jsxs)(el,{className:"max-w-4xl h-[80vh] bg-background/95 backdrop-blur-sm border-border/40",children:[(0,a.jsx)(en,{children:(0,a.jsx)(ei,{className:"text-2xl font-bold text-gold",children:"Settings"})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsxs)(ed,{value:n,onValueChange:i,className:"h-full flex flex-col",children:[(0,a.jsxs)(em,{className:"grid w-full grid-cols-3 flex-shrink-0",children:[(0,a.jsxs)(ex,{value:"account",children:[(0,a.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Account"]}),(0,a.jsxs)(ex,{value:"game",children:[(0,a.jsx)(sc.A,{className:"h-4 w-4 mr-2"}),"Game"]}),(0,a.jsxs)(ex,{value:"legal",children:[(0,a.jsx)(sd.A,{className:"h-4 w-4 mr-2"}),"Legal"]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden mt-4",children:[(0,a.jsx)(eh,{value:"account",className:"h-full m-0",children:(0,a.jsx)(sx,{})}),(0,a.jsx)(eh,{value:"game",className:"h-full m-0",children:(0,a.jsx)(sp,{})}),(0,a.jsx)(eh,{value:"legal",className:"h-full m-0",children:(0,a.jsx)(sv,{})})]})]})})]})})}var sy=r(87358);let sw="staging"===sy.env.NEXT_PUBLIC_ENV||"true"===sy.env.NEXT_PUBLIC_STAGING,sk=sy.env.NEXT_PUBLIC_STAGING_GAME_SERVER_HOST||"damnbruh-game-server-instance-test.onrender.com",sS="https://".concat(sk),sA="wss://".concat(sk),sC=[{id:"us-1-dollar",name:"US $1 Server",region:"US",entryFee:1,baseUrl:sw?sS:"https://damnbruh-game-server-instance-1-us.onrender.com",websocketUrl:sw?sA:"wss://damnbruh-game-server-instance-1-us.onrender.com",maxPlayers:20,priority:1,status:"online"},{id:"us-5-dollar",name:"US $5 Server",region:"US",entryFee:5,baseUrl:sw?sS:"https://damnbruh-game-server-instance-5-us.onrender.com",websocketUrl:sw?sA:"wss://damnbruh-game-server-instance-5-us.onrender.com",maxPlayers:20,priority:2,status:"online"},{id:"us-20-dollar",name:"US $20 Server",region:"US",entryFee:20,baseUrl:sw?sS:"https://damnbruh-game-server-instance-20-us.onrender.com",websocketUrl:sw?sA:"wss://damnbruh-game-server-instance-20-us.onrender.com",maxPlayers:20,priority:3,status:"online"},{id:"eu-1-dollar",name:"EU $1 Server",region:"EU",entryFee:1,baseUrl:sw?sS:"https://damnbruh-game-server-instance-1-eu.onrender.com",websocketUrl:sw?sA:"wss://damnbruh-game-server-instance-1-eu.onrender.com",maxPlayers:20,priority:1,status:"online"},{id:"eu-5-dollar",name:"EU $5 Server",region:"EU",entryFee:5,baseUrl:sw?sS:"https://damnbruh-game-server-instance-5-eu-dyb0.onrender.com",websocketUrl:sw?sA:"wss://damnbruh-game-server-instance-5-eu-dyb0.onrender.com",maxPlayers:20,priority:2,status:"online"},{id:"eu-20-dollar",name:"EU $20 Server",region:"EU",entryFee:20,baseUrl:sw?sS:"https://damnbruh-game-server-instance-20-eu.onrender.com",websocketUrl:sw?sA:"wss://damnbruh-game-server-instance-20-eu.onrender.com",maxPlayers:20,priority:3,status:"online"}];sC.filter(e=>"US"===e.region);class s_{initializeServers(){sC.forEach(e=>{this.servers.set(e.id,{...e})})}startHealthMonitoring(){this.healthCheckInterval&&clearInterval(this.healthCheckInterval),this.performHealthChecks(),this.healthCheckInterval=setInterval(()=>{this.performHealthChecks()},this.HEALTH_CHECK_INTERVAL)}stopHealthMonitoring(){this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null)}async performHealthChecks(){let e=Array.from(this.servers.values()).map(e=>this.checkServerHealth(e));try{(await Promise.allSettled(e)).forEach((e,s)=>{let r=Array.from(this.servers.values())[s];"fulfilled"===e.status&&e.value?this.updateServerStatus(e.value):this.updateServerStatus({serverId:r.id,timestamp:new Date,status:"offline",responseTime:0,error:"rejected"===e.status?e.reason:"Health check failed"})}),this.notifyListeners()}catch(e){}}async checkServerHealth(e){let s=Date.now();try{if("maintenance"===e.status)return{serverId:e.id,timestamp:new Date,status:"maintenance",responseTime:0};let r=new AbortController,a=setTimeout(()=>r.abort(),this.HEALTH_CHECK_TIMEOUT),t=await fetch("".concat(e.baseUrl,"/healthz"),{method:"GET",signal:r.signal,headers:{"Content-Type":"application/json"}});clearTimeout(a);let l=Date.now()-s;if(t.ok){let s=await t.json();return{serverId:e.id,timestamp:new Date,status:l>2e3?"degraded":"online",responseTime:l,playerCount:s.playerCount||0,uptime:s.uptime||0}}throw Error("HTTP ".concat(t.status,": ").concat(t.statusText))}catch(a){let r=Date.now()-s;return{serverId:e.id,timestamp:new Date,status:"offline",responseTime:r,error:a instanceof Error?a.message:"Unknown error"}}}updateServerStatus(e){let s=this.servers.get(e.serverId);s&&(s.status,s.status=e.status,s.lastHealthCheck=e.timestamp,s.responseTime=e.responseTime,void 0!==e.playerCount&&(s.playerCount=e.playerCount),void 0!==e.uptime&&(s.uptime=e.uptime),this.servers.set(s.id,s))}async findBestServer(e){let s=this.getAvailableServers();if(0===s.length)return{success:!1,error:"No servers available"};let r=s.filter(s=>s.region===e.region);if(0===r.length)return{success:!1,error:"No servers available in region: ".concat(e.region),fallbackServers:this.getAvailableServers()};if(e.preferredServerId){let s=r.find(s=>s.id===e.preferredServerId);if(s&&this.isServerAvailable(s))return{success:!0,serverId:s.id,serverName:s.name,websocketUrl:s.websocketUrl,fallbackServers:this.getFallbackServers(s)}}let a=r.filter(this.isServerAvailable).sort((e,s)=>{let r=(e.responseTime||999999)-(s.responseTime||999999);return 0!==r?r:(e.playerCount||0)-(s.playerCount||0)})[0];return a?{success:!0,serverId:a.id,serverName:a.name,websocketUrl:a.websocketUrl,fallbackServers:this.getFallbackServers(a)}:{success:!1,error:"No suitable servers found",fallbackServers:this.getAvailableServers()}}isServerAvailable(e){return"online"===e.status||"degraded"===e.status}getFallbackServers(e){return this.getAvailableServers().filter(s=>s.id!==e.id&&s.region===e.region).slice(0,2)}getServerStatus(e){return this.servers.get(e)||null}getAllServers(){return Array.from(this.servers.values())}getServersByRegion(e){return Array.from(this.servers.values()).filter(s=>s.region===e)}getAvailableServers(){return Array.from(this.servers.values()).filter(this.isServerAvailable)}subscribe(e){return this.listeners.add(e),e(this.getAllServers()),()=>{this.listeners.delete(e)}}notifyListeners(){let e=this.getAllServers();this.listeners.forEach(s=>{try{s(e)}catch(e){}})}async testConnection(e){let s=this.servers.get(e);if(!s)return!1;try{let e=await this.checkServerHealth(s);return(null==e?void 0:e.status)==="online"||(null==e?void 0:e.status)==="degraded"}catch(e){return!1}}destroy(){this.stopHealthMonitoring(),this.listeners.clear()}constructor(){this.servers=new Map,this.healthCheckInterval=null,this.listeners=new Set,this.HEALTH_CHECK_INTERVAL=3e4,this.HEALTH_CHECK_TIMEOUT=5e3,this.MAX_RETRY_ATTEMPTS=3,this.initializeServers(),this.startHealthMonitoring()}}let sE=new s_;function sR(e){let{open:s,onOpenChange:r}=e,[n,o]=(0,t.useState)("US"),{servers:c,availableServers:d,isLoading:m,error:u,getServersByRegion:x,refreshServers:h}=function(){let[e,s]=(0,t.useState)([]),[r,a]=(0,t.useState)(!0),[l,n]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=sE.subscribe(e=>{s(e),a(!1),n(null)});return()=>{e()}},[]);let i=(0,t.useCallback)(s=>e.filter(e=>e.region===s),[e]),o=(0,t.useCallback)(e=>sE.getServerStatus(e),[]),c=(0,t.useCallback)(async e=>{try{return await sE.findBestServer(e)}catch(e){return console.error("❌ Error finding best server:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}},[]),d=(0,t.useCallback)(async e=>{try{return await sE.testConnection(e)}catch(e){return console.error("❌ Error testing connection:",e),!1}},[]),m=(0,t.useCallback)(async()=>{try{a(!0),n(null),sE.startHealthMonitoring(),await new Promise(e=>setTimeout(e,1e3))}catch(e){console.error("❌ Error refreshing servers:",e),n(e instanceof Error?e.message:"Failed to refresh servers")}finally{a(!1)}},[]),u=e.filter(e=>"online"===e.status||"degraded"===e.status);return{servers:e,availableServers:u,isLoading:r,error:l,getServersByRegion:i,getServerStatus:o,findBestServer:c,testConnection:d,refreshServers:m}}(),f=()=>x(n);(0,t.useEffect)(()=>{if(!s)return;let e=setInterval(()=>{h()},3e4);return()=>clearInterval(e)},[s,h]);let g=e=>{let{servers:s}=e;return(0,a.jsxs)("div",{className:"min-h-[400px] flex flex-col",children:[m&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(E.A,{className:"w-6 h-6 animate-spin text-muted-foreground"}),(0,a.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading servers..."])]}),u&&!m&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-red-400 mb-4",children:u}),(0,a.jsxs)(i.a,{variant:"white-outline",size:"sm",onClick:h,children:[(0,a.jsx)(E.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]}),!m&&!u&&0===s.length&&(0,a.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,a.jsx)(R.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg font-medium mb-2",children:"No servers available"}),(0,a.jsx)("p",{className:"text-sm",children:"Check back later or create a new game"})]}),!m&&!u&&s.length>0&&(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,a.jsx)(l.Zp,{className:"bg-background/80 backdrop-blur-sm border-border/40",children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsxs)("div",{className:"bg-gold/20 text-gold border border-gold/30 rounded-md text-lg font-bold px-3 py-2 h-12 flex items-center justify-center",children:["$",e.entryFee]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"relative w-2 h-2",children:"online"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-ping"}),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 bg-green-400 rounded-full"})]}):"degraded"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-ping"}),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 bg-yellow-400 rounded-full"})]}):(0,a.jsx)("div",{className:"w-2 h-2 bg-red-400 rounded-full"})}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"online"===e.status?"Online":"degraded"===e.status?"Degraded":"Offline"})]})}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:(0,a.jsxs)("span",{children:["Server ID: ",e.id]})])]}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(i.a,{variant:"offline"===e.status?"white-outline":"gold",size:"sm",onClick:()=>{var s;console.log("\uD83C\uDFAE Join Server Button Pressed!",{serverId:s=e.id,timestamp:new Date().toISOString()}),y.oR.success("Ready to join server ".concat(s,"!"))},disabled:"offline"===e.status,children:"offline"===e.status?"Offline":"Join"})})]})})},e.id))})]})};return(0,a.jsx)(er,{open:s,onOpenChange:r,children:(0,a.jsxs)(el,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[(0,a.jsx)(en,{className:"flex-shrink-0",children:(0,a.jsx)(ei,{className:"text-2xl font-bold text-center",children:"Server Browser"})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsxs)(ed,{value:n,onValueChange:e=>o(e),className:"h-full flex flex-col",children:[(0,a.jsxs)(em,{className:"grid w-full grid-cols-2 flex-shrink-0",children:[(0,a.jsxs)(ex,{value:"US",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"US"]}),(0,a.jsxs)(ex,{value:"EU",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"EU"]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,a.jsx)(eh,{value:"US",className:"h-full m-0",children:(0,a.jsxs)("div",{className:"h-full overflow-y-auto pr-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Available Servers"}),(0,a.jsxs)(i.a,{variant:"white-outline",size:"sm",onClick:h,disabled:m,children:[(0,a.jsx)(E.A,{className:"w-4 h-4 mr-2 ".concat(m?"animate-spin":"")}),"Refresh"]})]}),(0,a.jsx)(g,{servers:f()})]})}),(0,a.jsx)(eh,{value:"EU",className:"h-full m-0",children:(0,a.jsxs)("div",{className:"h-full overflow-y-auto pr-2 pt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Available Servers"}),(0,a.jsxs)(i.a,{variant:"white-outline",size:"sm",onClick:h,disabled:m,children:[(0,a.jsx)(E.A,{className:"w-4 h-4 mr-2 ".concat(m?"animate-spin":"")}),"Refresh"]})]}),(0,a.jsx)(g,{servers:f()})]})})]})]})}),(0,a.jsx)("div",{className:"flex-shrink-0 pt-4 border-t border-border/20",children:(0,a.jsx)("div",{className:"text-xs text-muted-foreground text-center",children:"Auto-refreshing every 5 seconds"})})]})})}var sP=r(26617),sF=r(68854),sU=r(18344),sI=r(78598);let sT=e=>{let{items:s,className:r="",gap:l=3,duration:n=15}=e,i=(0,sU.s)(),o=(0,t.useRef)(null);return(0,t.useEffect)(()=>{(async()=>{if(o.current){let e=o.current.scrollWidth/2;await i.start({x:-e,transition:{x:{duration:n,ease:"linear",repeat:1/0}}})}})()},[i,n]),(0,a.jsx)("div",{className:"overflow-hidden whitespace-nowrap w-full flex items-center ".concat(r),children:(0,a.jsx)(sI.P.div,{className:"flex items-center",style:{gap:"".concat(.25*l,"rem")},ref:o,animate:i,children:[...s,...s].map((e,s)=>(0,a.jsx)("div",{className:"flex-shrink-0",children:e},s))})})},sL=[{value:"10 SOL",usdValue:"$1875.9",probability:"0.002%"},{value:"2.5 SOL",usdValue:"$468.98",probability:"0.006%"},{value:"1 SOL",usdValue:"$187.59",probability:"0.012%"},{value:"0.1 SOL",usdValue:"$18.76",probability:"0.088%"},{value:"0.001 SOL",usdValue:"$0.19",probability:"10.482%"},{value:"25 SP Spirit",usdValue:"Spirit",probability:"89.411%"}];function sM(e){let{open:s,onOpenChange:r}=e,t=sL.map((e,s)=>(0,a.jsxs)("div",{className:"w-30 h-30 border border-border/40 rounded-lg flex flex-col items-center justify-center flex-shrink-0 p-2",style:{width:"".concat(120,"px"),height:"".concat(120,"px"),background:"linear-gradient(135deg, rgba(255, 215, 0, 0.08) 0%, rgba(184, 134, 11, 0.05) 50%, rgba(0, 0, 0, 0.02) 100%)",border:"1px solid rgba(255, 215, 0, 0.3)",boxShadow:"inset 0 0 10px rgba(255, 215, 0, 0.1)"},children:[(0,a.jsx)("div",{className:"text-base font-medium text-gold leading-tight",children:e.value}
